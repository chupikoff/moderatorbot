# moderatorbot
Базовый бот для телеграм чата.

На текущий момент бот умеет только отдавать случайные картинки и музыку из ранее наполненных директорий.

Бот умеет в докер:
1) подкидываем файл с токеном с именем settings.py (содержимое файла API_KEY = "token") в директорию с проектом;
2) Собираете образ из Dockerfile;
3) Запускаете контейнер с монтированием директорий:

Бот отдаёт контент из директории /opt

docker run -d -v {что монтировать}:{/opt/(audio, images, spb)} {image_name:version}.

/start - проверить работу бота (должен отдать "чё надо")
/image - случайная картинка из наполненной и подключенной к контейнеру директории
/spb   - случайный пранк из наполненной и подключенной к контейнеру директории

==============================================================

Можно обернуть контейнер в systemd:

1. Создать файл /etc/systemd/system/docker.{service_name}.service
2. Наполнить файл:

[Unit]
Description=ModeratorBot Service
After=docker.service
Requires=docker.service

[Service]
TimeoutStartSec=0
Restart=always
ExecStartPre=-/usr/bin/docker exec %n stop
ExecStartPre=-/usr/bin/docker rm %n
ExecStartPre=/usr/bin/docker pull chupikoff/moderator:latest
ExecStart=/usr/bin/docker run --rm --name %n \
    -v /home/hes/images:/opt/images \
    -v /home/hes/spb:/opt/spb \
    -v /home/hes/audio:/opt/audio \
    chupikoff/moderator:latest
[Install]
WantedBy=default.target

3. sudo service docker.{service_name} start

==============================================================

Ветка бота testing используется с другим токеном

==============================================================

Далее необходимо реализовать:

1) Приветствие нового юзера в чате;
2) Административные функции (бан, мут);
3) Ограничить юзеру отправлять определенный тип сообщения (gif, media, стаканы);
4) Реагирование на триггер слова (триггер брать из словаря);
4) Вести статистику пользователя (количество отправленных слов, поздравлять юзеров после достижения количества отправленных слов, вести карму юзера);
5) Файлопомойка локальных движух и мемов (Скармливать боту контент с #тегом, Бот по команде выдавал список сохраненных им тегов и по выбранному тегу выдавал контент);
7) Развлекать (растить что угодно, надоела куча спамящих ботов, создавать стикеры из изображений, записывать дни рождения юзеров).

Пока всё, дальше будет дорабатываться.
